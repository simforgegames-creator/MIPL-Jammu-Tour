<krpano version="1.21" title="Virtual Tour">
	<events onloadcomplete="hideloading();" onxmlcomplete="showloading();"/>
	<action name="showloading">
        trace('Showing loading screen...');
        set(layer[loading].visible, true);
	</action>

	<action name="hideloading">
        trace('Hiding loading screen...');
        set(layer[loading].visible, false);
	</action>

	<layer name="loading" url="Loading.gif" keep="true" align="center" visible="false" />

	<include url="skin/vtourskin.xml" />
	<!-- <include url="menu/plugins/menu_sm.xml" />  -->
	<!--<include url="menu/plugins/edit_menu_sm.xml" />-->
	<include url="menu/plugins/photo_sm.xml" />
	<include url="%SWFPATH%/add_hotspot/plugins_l/add_hotspot.xml" />
	<!-- <include url="%SWFPATH%/add_hotspot/plugins_l/editor/add_hotspot_2.xml" /> -->
	<!-- <include url="%VIEWER%/plugins/showtext.xml" /> -->


	<action name="do_crop_animation" scope="local" args="framewidth, frameheight, framerate">
		<!--  define local variables  -->
calc(local.xframes, (caller.imagewidth /framewidth) BOR 0); calc(local.frames, xframes * ((caller.imageheight / frameheight) BOR 0)); def(local.frame, integer, 0);
						<!--  set the first frame  -->
calc(caller.crop, '0|0|' + framewidth + '|' + frameheight);
						<!--  do the animation  -->
setinterval(calc('crop_anim_' + caller.name), calc(1.0 / framerate), if(caller.loaded, inc(frame); if(frame GE frames, if(caller.onlastframe !== null, callwith(caller, onlastframe() ) ); set(frame,0); ); mod(xpos, frame, xframes); div(ypos, frame, xframes); Math.floor(ypos); mul(xpos, framewidth); mul(ypos, frameheight); calc(caller.crop, xpos + '|' + ypos + '|' + framewidth + '|' + frameheight); ,
						<!--  stop the interval when the hotspot gets removed  -->
clearinterval(calc('crop_anim_' + caller.name)); ); );

	</action>
	<!-- customize skin settings: maps, gyro, webvr, thumbnails, tooltips, layout, design, ... -->
	<skin_settings maps="false" maps_type="google" maps_bing_api_key="" maps_google_api_key="" maps_zoombuttons="false" maps_loadonfirstuse="true" gyro="true" gyro_keeplookingdirection="false" webvr="false" webvr_keeplookingdirection="true" webvr_prev_next_hotspots="true" autotour="false" littleplanetintro="false" followmousecontrol="false" title="true" thumbs="true" thumbs_width="120" thumbs_height="80" thumbs_padding="10" thumbs_crop="0|40|240|160" thumbs_opened="false" thumbs_text="false" thumbs_dragging="true" thumbs_onhoverscrolling="false" thumbs_scrollbuttons="false" thumbs_scrollindicator="false" thumbs_loop="false" tooltips_buttons="false" tooltips_thumbs="false" tooltips_hotspots="false" tooltips_mapspots="false" deeplinking="false" loadscene_flags="MERGE" loadscene_blend="OPENBLEND(0.5, 0.0, 0.75, 0.05, linear)" loadscene_blend_prev="SLIDEBLEND(0.5, 180, 0.75, linear)" loadscene_blend_next="SLIDEBLEND(0.5,   0, 0.75, linear)" loadingtext="true" layout_width="100%" layout_maxwidth="814" controlbar_width="-24" controlbar_height="40" controlbar_offset="20" controlbar_offset_closed="-40" controlbar_overlap.no-fractionalscaling="10" controlbar_overlap.fractionalscaling="0" design_skin_images="vtourskin.png" design_bgcolor="0x2D3E50" design_bgalpha="0.8" design_bgborder="0" design_bgroundedge="1" design_bgshadow="0 4 10 0x000000 0.3" design_thumbborder_bgborder="3 0xFFFFFF 1.0" design_thumbborder_padding="2" design_thumbborder_bgroundedge="0" design_text_css="color:#FFFFFF; font-family:Arial;" design_text_shadow="1" />

	<!--
	    For an alternative skin design either change the <skin_settings> values 
	    from above or optionally include one of the predefined designs from below.
	-->
	<!-- <include url="skin/vtourskin_design_flat_light.xml" /> -->
	<!-- <include url="skin/vtourskin_design_glass.xml" /> -->
	<!-- <include url="skin/vtourskin_design_ultra_light.xml" /> -->
	<!-- <include url="skin/vtourskin_design_117.xml" /> -->
	<!-- <include url="skin/vtourskin_design_117round.xml" /> -->
	<!-- <include url="skin/vtourskin_design_black.xml" /> -->

	<action name="startup" autorun="onstart">
		playsound(test, audio/Music.mp3, 0);

		if(startscene === null OR !scene[get(startscene)], copy(startscene,scene[0].name); );
        loadscene(get(startscene), null, MERGE);
        
	</action>

	<action name="playaudio">
        playsound(test, audio/Music.mp3, 0);
	</action>

	<action name="pauseaudio">
        pausesound(test);
	</action>

	<plugin name="soundinterface" keep="true" url="soundinterface.js" preload="true" volume="0.5" mute="false" />

	<layer name="play_button" url="play_button_image.png" align="lefttop" x="20" y="20" onclick="playaudio();" />

	<layer name="pause_button" url="pause_button_image.png" align="lefttop" x="100" y="20" onclick="pauseaudio();" />

	<action name="toggle_sound">
		   if(issoundplaying,
		   playaudio(),
		   pauseaudio()
		   );
		   issoundplaying = !issoundplaying;
		    toggle_sound_icon();
	</action>

	<action name="toggle_sound_icon">
		if(issoundplaying,
			set(layer[skin_btn_mute].url, 'soundoff.png'),
			set(layer[skin_btn_mute].url, 'skin\soundon.png')
		);
	</action>
	<var name="issoundplaying" value="false" />

	<action name="do_crop_animation" scope="local" args="framewidth, frameheight, framerate">
		<!-- define local variables -->
		calc(local.xframes, (caller.imagewidth /framewidth) BOR 0);
		calc(local.frames, xframes * ((caller.imageheight / frameheight) BOR 0));
		def(local.frame, integer, 0);
		
								<!-- set the first frame -->
		calc(caller.crop, '0|0|' + framewidth + '|' + frameheight);
		
								<!-- do the animation -->
		setinterval(calc('crop_anim_' + caller.name), calc(1.0 / framerate),
			if(caller.loaded,
				inc(frame);
				if(frame GE frames, if(caller.onlastframe !== null, callwith(caller, onlastframe() ) ); set(frame,0); );
				mod(xpos, frame, xframes);
				div(ypos, frame, xframes);
				Math.floor(ypos);
				mul(xpos, framewidth);
				mul(ypos, frameheight);
				calc(caller.crop, xpos + '|' + ypos + '|' + framewidth + '|' + frameheight);
			  ,
										<!-- stop the interval when the hotspot gets removed -->
				clearinterval(calc('crop_anim_' + caller.name));
			);
		);
	</action>

	<!-- <layer name="share_button" url="add_hotspot\picture\share.png" align="righttop" x="10" y="10" scale="0.3" ondown="js(showShareOptions())" keep="true" />
	
	<layer name="Map_Button" url="add_hotspot/picture/map.png" align="righttop" x="10" y="70" scale="0.45" keep="true" onclick="openGoogleMaps();" /> Added onclick to trigger the action -->

	<action name="openGoogleMaps">
	openurl("https://maps.app.goo.gl/SiJnJ7EXa2Y4DjoG6");
	</action>
	<!-- 
<layer name="Call_Us_Button" url="add_hotspot/picture/Call.png" align="righttop" x="10" y="140" scale="0.45" keep="true" onclick="OpenNiftWebsite();" /> //Added onclick to trigger the action

	 -->

	<action name="OpenNiftWebsite">
	openurl("url");
	</action>

	<layer name="MIPL_Button" type="text" text="Created By MIPL" bgroundedge="5 5 5 5" bgshadow="0 0 0 0x000000 0.5" bgcolor="0x111E4E" bg="true" width="150.00" backgroundalpha="0.50" height="38" bgborder="1,1,1,1 16777215 0" css="font-family:verdana; font-size:16px; color:#ffffff;" textwidth="120" textheight="38" textalign="center" align="rightbottom" x="10*" y="10" keep="true" onclick="OpenMiplWebsite();" />

	<action name="OpenMiplWebsite">
	openurl("http://miplsolns.com/");
	</action>
	<!-- 
<layer name="Info_Button" url="add_hotspot\picture\meet.png" align="righttop" x="100" y="15" scale=".7" keep="true" onclick="Open_Directoer();" /> // Added onclick to trigger the action 

	 -->

	<action name="Open_Directoer"> onclick="stopsound(test); skin_loadscene(video_short);"
	</action>



	<action name="initialize">
		
        set(layer[loading_screen].visible, true);
	</action>


	<action name="show_loading">
		trace('Showing loading screen...');
        set(layer[loading].visible, true);

	</action>

	<action name="hide_loading">
		trace('Hiding loading screen...');
        set(layer[loading].visible, false);
	</action>

	<events onloadcomplete="hideloading(); trace('Panorama load complete');" />

	<layer name="skin_logo" url="add_hotspot\picture\logo1.png" keep="true" scale="1" x="12" y="20"/>
	<action name="startup" devices="html5+css3d|ios">
	if(startscene === null, copy(startscene,scene[0].name));
	loadscene(get(startscene), null, MERGE);
	</action>

	<!-- Startup actions effect of little planet, running only for supported platforms -->
	<!-- when the loading is done, wait 2 seconds and then start with the animation to a normal view -->
	<action name="startup" devices="flash|html5+webgl">
	if(startscene === null, copy(startscene,scene[0].name));
	set(display.flash10, off);
	loadscene(get(startscene)); 
	set(view.stereographic,true); 
	set(view.fisheye, 1.0); 
	set(view.fov, 155); 
	set(view.fovtype, VFOV); 
	set(view.fovmax, 150); 
	set(view.hlookat, -165); 
	set(view.vlookat, 77);
	set(hotspot[hsp_0_4].alpha, 0.0); 
	set(hotspot[hsp_0_2].alpha, 0.0); 
	set(hotspot[hsp_0_3].alpha, 0.0); 
	set(hotspot[hsp_0_1].alpha, 0.0); 
	set(hotspot[hsp_0_5].alpha, 0.0); 
	set(hotspot[hsp_0_6].alpha, 0.0); 
	set(hotspot[hsp_0_7].alpha, 0.0); 
	set(hotspot[hsp_0_8].alpha, 0.0); 
	set(hotspot[hsp_0_9].alpha, 0.0); 
	set(hotspot[hsp_new].alpha, 0.0); 
	set(hotspot[spot_5].alpha, 0.0); 
	set(hotspot[spot_4].alpha, 0.0); 
	set(hotspot[spot_3].alpha, 0.0); 
	set(hotspot[spot_2].alpha, 0.0); 
	set(hotspot[spot_1].alpha, 0.0);
	
	
							<!-- Keep hotspots hidden initially -->
	set(autorotate.enabled,false);
	wait(blend);
	delayedcall(2, normalview() );
	</action>

	<!-- Set to normal view -->
	<action name="normalview">
	tween(view.hlookat, 10, 2.5, easeInOutQuad);
	tween(view.vlookat, 0, 2.5, easeInOutQuad);
	tween(view.fov, 65, 2.5, easeInOutQuad);
	tween(view.fisheye, 0.0, 2.5, easeInOutQuad);
	wait(1); 						<!-- Ensure all transitions complete before showing hotspots -->
		<!-- Show hotspots after transition -->
	tween(hotspot[hsp_0_4].alpha,  1.0, 1.0, easeInOutQuad); 
	tween(hotspot[hsp_0_2].alpha,  1.0, 1.0, easeInOutQuad); 
	tween(hotspot[hsp_0_3].alpha, 1.0, 1.0, easeInOutQuad); 
	tween(hotspot[hsp_0_1].alpha, 1.0, 1.0, easeInOutQuad); 
	tween(hotspot[hsp_0_5].alpha, 1.0, 1.0, easeInOutQuad); 
	tween(hotspot[hsp_0_6].alpha, 1.0, 1.0, easeInOutQuad); 
	tween(hotspot[hsp_0_7].alpha, 1.0, 1.0, easeInOutQuad); 
	tween(hotspot[hsp_0_8].alpha, 1.0, 1.0, easeInOutQuad); 
	tween(hotspot[hsp_0_9].alpha, 1.0, 1.0, easeInOutQuad); 
	tween(hotspot[hsp_new].alpha, 1.0, 1.0, easeInOutQuad); 
	tween(hotspot[spot_5].alpha, 1.0, 1.0, easeInOutQuad);  
	tween(hotspot[spot_4].alpha, 1.0, 1.0, easeInOutQuad);  
	tween(hotspot[spot_3].alpha, 1.0, 1.0, easeInOutQuad); 
	tween(hotspot[spot_2].alpha, 1.0, 1.0, easeInOutQuad);  
	tween(hotspot[spot_1].alpha, 1.0, 1.0, easeInOutQuad); 
	set(display.details, 24);
	set(display.flash10, on);
	set(view.fovmax, 135);
	</action>

	<!-- Start autorotate and play sound globally for tour -->
	<events name="currentpano" keep="true" onnewpano="set(autorotate.enabled, true);
					playsound(test, audio/Music.mp3, 0);
		set(events[currentpano].onnewpano, null);" />

	<!-- Autorotate -->
	<autorotate enabled="false" waittime="3.0" accel="0.5" speed="6.0" horizon="0.0" tofov="100" />

	<scene name="scene_DJI_0088_sky-2" title="Aerial View 1" onstart="startLittlePlanetAnimation();" onloaded="hideloading();" thumburl="panos/image/01 ADM block campus.jpg">


		<view fov="90" vlookat="0" hlookat="10" />
		<!-- Define the controls and preview -->
		<preview url="panos/image/01 ADM block campus.jpg" />

		<!-- Define the image for the scene -->
		<image>
			<sphere url="panos/image/01 ADM block campus.jpg" />

		</image>

		<hotspot name="hsp_0_4" style="link_hs_sm" onout="tween(scale,0.34,0.1);" onclick="skin_loadscene(scene_DJI_0088_sky-3);" onhover="tween(scale,0.45,0.1);" url="%FIRSTXML%/add_hotspot/picture/Nift Icon.png" handcursor="false" scale="0.34" ath="0" atv="11" install_onclick="5" visible2_temp="true" enabled2_temp="true" />
		<layer name="text4" url="textfield.swf" width="200.00" backgroundalpha="0.50" align="down" x="0" y="100" height="55" bgborder="1,1,1,1 16777215 0" css="font-family:verdana; font-size:24px; color:#ffffff;" bgroundedge="5 5 5 5" bgshadow="0 0 0 0х000000 0.5" bgcolor="0x111E4E" bg="true" textwidth="120" textheight="38" textalign="center" text="ADM block campus" parent="hotspot[hsp_0_4]"/>


	</scene>

	<scene name="scene_DJI_0088_sky-3" title="Aerial View 2" onstart="startLittlePlanetAnimation();" onloaded="hideloading();" thumburl="panos/image/04 Adm block Front open area.jpg">


		<view fov="90" vlookat="0" hlookat="10" />
		<!-- Define the controls and preview -->
		<preview url="panos/image/04 Adm block Front open area.jpg" />

		<!-- Define the image for the scene -->
		<image>
			<sphere url="panos/image/04 Adm block Front open area.jpg" />

		</image>

		<hotspot name="hsp_0_4" style="link_hs_sm" onout="tween(scale,0.34,0.1);" onclick="skin_loadscene(scene_Amphitheatre);" onhover="tween(scale,0.45,0.1);" url="%FIRSTXML%/add_hotspot/picture/Nift Icon.png" handcursor="false" scale="0.34" ath="0" atv="11" install_onclick="5" visible2_temp="true" enabled2_temp="true" />
		<layer name="text4" url="textfield.swf" width="200.00" backgroundalpha="0.50" align="down" x="0" y="100" height="55" bgborder="1,1,1,1 16777215 0" css="font-family:verdana; font-size:24px; color:#ffffff;" bgroundedge="5 5 5 5" bgshadow="0 0 0 0х000000 0.5" bgcolor="0x111E4E" bg="true" textwidth="120" textheight="38" textalign="center" text="Adm block Front open area" parent="hotspot[hsp_0_4]"/>


	</scene>


	<events name="globalEvents" onnewscene="playsound(test, audio/Music.mp3, 0);" />

	<!-- <scene name="video_short" title="videocorto" thumburl="menu\image\DirectorOffice.png" onstart="showloading();" onloaded="hideloading();" lat="" lng="" alt="" heading="" isvideopano="true">
		<plugin name="vidMon" preload="false" url="%VIEWER%/plugins/videoplayer.js" panovideo="true" videourl="MeetDirectoer.mp4" posterurl="panos/VC_Room.tiles/preview.jpg" pausedonstart="false" loop="false" volume="1.0" onleave="playsound(test, audio/Music.mp3, 0);" />
		<image >
			<preview url="panos/VC_Room.tiles/preview.jpg" />
			<sphere url="plugin:vidMon" />
		</image>

		<hotspot name="spot__1" url="arrow.png" onloaded="do_crop_animation(128,128, 60);" ath="109.5941" atv="3.4660" onclick="playsound(test, audio/Music.mp3, 0); skin_loadscene(scene_Director_s_Cabin_and_Conferrence_Room);" scale="0.40" zoom="false" />
		<layer name="text__1" url="textfield.swf" width="100.00" backgroundalpha="0.50" align="down" x="0" y="80" height="38" bgborder="1,1,1,1 16777215 0" css="font-family:verdana; font-size:24px; color:#ffffff;" bgroundedge="5 5 5 5" bgshadow="0 0 0 0х000000 0.5" bgcolor="0x111E4E" bg="true" textwidth="120" textheight="38" textalign="center" text="Exit" parent="hotspot[spot__1]"/>

		<hotspot name="hsp_61_1" style="link_hs_sm" url="%FIRSTXML%/add_hotspot/picture/nift-circular.png" scale="3.299" ath="1.4872" atv="89.3697" distorted="true" install_onclick="5" />
	</scene> -->

</krpano>